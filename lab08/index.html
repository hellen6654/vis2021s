<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="utf-8">
  <title>Lab 8</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

    @keyframes letterDraw {
      1% {
        opacity: 1;
      }

      to {
        stroke-dashoffset: 0;
        opacity: 1;
      }
    }

    h1,
    div {
      background-color: rgba(255, 255, 0, 0.1);
      font-family: 'Noto Serif JP', serif;
      font-size: 24pt;
      border: solid 1px black;
      width: 90%;
      margin: 5px auto;
      padding: 10px;
    }

    div {
      font-size: 12pt;
    }

    body {
      background-color: rgba(255, 128, 255, 0.1);
    }
  </style>
  <script src="http://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 -->
</head>

<body>
  <h1>
    lab08 漢字書寫 (鉛筆字) (毛筆字也OK!) Path Animation
  </h1>
  <div>
    限定使用 D3.js，參考以下影片。
    <ul>
      <li><a href="https://bl.ocks.org/basilesimon/f164aec5758d16d51d248e41af5428e4">Animate path in D3</a></li>
      <li><a href="https://codepen.io/MyXoToD/post/howto-self-drawing-svg-animation">"Self-Drawing" SVG</a></li>
      <li><a href="https://stackoverflow.com/questions/15275362/how-to-transition-a-path-in-d3-js">How to transition a
          path in d3.js</a></li>
      <li><a href="https://css-tricks.com/svg-line-animation-works/">How SVG Line Animation Works</a></li>
      <li><a href="http://blog.roachking.net/blog/2014/10/31/osolve-team-drawing-animation/">使用 SVG 將圖片做成動畫</a></li>
      <li><a href="https://www.hesyifei.com/">何一非</a></li>
    </ul>
  </div>

  <div id="demo">
    Demo
    <br />
    <label for="speed">Speed:</label>
    <select id="speed">
    </select>
    <br />
    <label for="color">Color:</label>
    <input id="color" type="color" value="#4c4cd6">
    <hr>

    <svg id="first" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
      viewBox="0 0 258 258" width="256">
      <g id="ypath">
        <path d="M 8.923077,103.84615 20.153846,105.69231 32.307692,104 94.46154,78" id="path1642" />
        <path
          d="m 77.230769,5.8461538 11.076923,17.8461542 -3.384615,-2 L 82.307692,50 81.846154,79.076923 80.461539,109.84615 80,145.84615 80.461539,176.76923 80,209.07692 l 3.692308,6.61539 -15.538462,-21.53846 -9.384615,-19.84616"
          id="path1644" />
        <path d="m 78.769231,106.15385 -12,19.6923 L 53.384615,140.30769 38.769231,151.69231 20.307692,162"
          id="path1759" />
        <path d="m 81.730769,109.69231 11.307691,9 10.65385,5.73077" id="path1761" />
        <path d="m 143.84615,34.615385 4.76923,9.538461 -4.76923,41.538462 -1.6923,-3.230769 9.38461,22.307691"
          id="path1763" />
        <path
          d="M 142.46154,20.615385 154,20 l 18,-5.076923 12.30769,12.923077 -7.38461,-4.615385 -2.76923,47.230769 -3.69231,23.692308 -2.5426,9.899634 -0.65271,-12.564741 -2.12132,-2.991606 -16.15467,3.861891"
          id="path1765" />
        <path d="m 151.70988,63.748396 17.56889,-7.016675" id="path1767" />
        <path
          d="m 106.50944,125.56585 12.61914,1.71337 19.03749,-7.615 50.69411,-12.94549 23.28014,-4.67778 12.51035,-1.74057 3.04599,-2.82843 15.23,6.74471 8.81163,5.87443"
          id="path1769" />
        <path d="m 145.07396,119.90899 -5.3441,6.64953 -15.05321,12.03441" id="path1771" />
        <path
          d="m 138.76439,128.85661 5.38489,2.80123 9.89949,2.03973 13.48943,-1.52299 c 0,0 12.29277,-1.41422 20.12534,0 7.83257,1.41421 14.79485,4.02506 14.79485,4.02506 l 9.8995,7.83257 6.09199,10.22585 -0.32635,9.8995 -12.29278,11.20492 -7.17986,9.02921 -10.55221,10.11707 -13.38063,9.02921 -23.17135,11.42249 -10.44342,2.82843 1.523,-4.569 -9.8995,-15.12121 -4.13385,-22.40984"
          id="path1773" />
        <path
          d="m 155.02784,135.08459 c 0,0 0.59833,4.48741 -0.87028,5.92882 -1.46861,1.44141 -17.40571,15.63794 -17.40571,15.63794 l -5.11292,3.8075 -6.96228,2.82842 -6.96229,8.59407"
          id="path1775" />
        <path d="m 139.03635,156.76013 34.79782,-14.03335 2.44767,-1.91734" id="path1777" />
        <path
          d="m 182.87697,140.44229 6.41836,1.08785 -6.30957,1.84936 -14.25092,16.6442 -15.22999,15.01242 -15.44757,13.16307"
          id="path1779" />
      </g>

      <clippath id="yclip">
        <path fill="none" id="path2" d="M83,10 Q92,23,91,27 Q88,34,86,44 Q85,56,85,79 Q90,77,91,79 
      Q91,84,85,86 Q83,95,84,109 Q94,118,105,121 Q108,122,106,125 Q103,130,96,124 
      Q92,122,85,116 Q83,113,83,112 Q83,120,82,139 V187 Q81,204,87,214 Q88,218,85,220 
      Q81,222,79,219 Q65,199,61,180 Q60,177,63,180 Q67,188,73,196 L74,197 Q79,200,79,194 
      Q79,166,78,150 V114 Q59,145,28,159 Q20,163,27,157 Q63,136,78,100 Q77,99,78,94 
      Q79,90,79,88 Q75,90,70,92 Q53,99,46,102 Q30,110,14,106 Q10,105,15,104 Q27,106,79,82 
      Q78,62,80,40 Q80,37,81,35 Q82,21,80,12 Q78,10,79,9 Q80,9,83,10 M149,68 Q145,93,151,97 
      Q152,102,150,102 Q145,103,145,99 Q137,83,141,79 L143,73 Q146,55,146,40 Q145,36,148,39 
      Q151,44,151,49 Q151,53,149,68 M148,19 Q150,19,157,17 Q162,15,164,14 Q172,10,177,15 
      Q179,18,183,21 Q186,24,188,25 Q192,30,186,32 Q181,32,180,36 Q176,81,170,105 
      Q169,108,167,109 Q166,109,166,106 Q166,96,165,91 Q155,95,151,93 Q148,92,151,90 
      Q155,90,158,88 Q162,84,166,86 Q167,88,168,88 T170,85 Q172,66,174,22 Q173,17,169,18 
      Q153,23,148,21 Q143,20,148,19 M153,61 Q154,61,158,59 Q159,59,160,58 Q163,56,167,57 
      L169,59 Q169,60,168,60 Q155,67,153,63 Q150,62,153,61 M184,138 Q185,138,188,139 H190 
      Q192,142,192,143 T189,144 Q185,144,183,147 Q155,177,143,185 Q137,189,142,184 
      Q159,169,178,147 Q181,144,180,141 T184,138 M126,127 Q119,131,109,127 Q105,126,110,125 
      H112 Q120,123,129,120 Q189,103,216,100 Q221,101,225,96 Q227,95,232,96 Q245,103,250,106 
      Q251,107,251,108 Q250,109,249,109 Q243,110,239,105 Q233,101,223,102 Q200,104,146,120 
      Q144,125,141,128 Q147,134,163,131 Q197,128,207,137 Q218,146,222,160 Q224,169,217,170 
      Q214,170,208,176 Q187,204,145,219 Q141,220,139,220 Q137,219,139,217 Q141,216,137,214 
      Q130,205,129,182 Q128,175,131,182 Q133,201,145,210 Q147,215,154,212 Q194,196,210,166 
      L211,165 Q218,153,213,148 Q200,128,157,135 Q158,141,155,143 Q150,146,144,152 
      Q141,154,145,153 T159,148 Q168,144,173,142 Q180,141,173,144 Q122,164,121,170 
      Q118,171,118,169 Q126,158,128,159 Q132,160,134,156 Q156,139,153,135 Q146,134,139,131 
      Q137,133,135,133 Q131,137,127,137 T126,135 Q134,130,143,121 Q139,122,132,125z" />
      </clippath>

    </svg>


    <svg id="second" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
      viewBox="0 0 258 258" width="256">
      <g id="xpath">
        <path
     d="m 79.846154,11.538462 2,11.538461 -22.153846,36.153846 -34.307693,47.230771"
     id="path993" />
  <path
     d="m 69.384615,51.230769 -4,29.384616 -3.846153,25.846155 -1.23077,26.46154 -0.615384,58.61538 -4,-0.30769 18.461538,20.30769 1.076923,6.15385 2.153846,4.46154"
     id="path995" />
  <path
     d="m 133.38462,9.8461539 32.92307,17.3846151 -14,-4.461538 -12.46154,6.769231"
     id="path997" />
  <path
      d="M 77.230769,61.384615 92.46154,66.615385 151.53846,55.846154 202.61538,49.230769 220,49.076923 l -19.69231,-4.153846 -9.07692,7.230769 -20.15385,5.076923"
      id="path999" />
  <path
     d="m 115.69231,100.61538 27.38461,-0.769226 19.84616,-7.384615 h 10 l -19.84616,7.384615 -17.38461,16.923076"
     id="path1001" />
  <path
     d="m 116.76923,135.38462 22.92308,-1.84616 34.92307,-11.07692 -11.6923,-0.76923 -29.23077,30.61538"
     id="path1003" />
  <path
     d="m 125.53846,167.84615 8.46154,20 14.76923,12.3077 -17.07692,-7.69231"
     id="path1005" />
  <path
     d="M 131.69231,173.84615 176.46154,162 l 11.69231,11.53846 -5.53847,-1.38461 -11.23076,22.46153"
     id="path1007" />
  <path
     d="m 147.30406,195.02549 37.09591,0.46234 5.3305,-0.10879"
     id="path1009" />
      </g>
      <clippath id="xclip">
        <path
     d="M139,13Q135,11,140,12Q162,15,170,25Q171,32,168,31Q152,25,145,28Q141,29,141,28L144,25Q149,22,146,19
     Q144,18,142,16Q140,15,139,13Z M81,16Q88,26,85,28Q78,39,72,53Q72,65,68,76Q64,90,62,116Q61,143,62,181Q63,196,72,204Q78,208,78,218
     Q78,221,77,221Q77,222,75,220Q70,213,56,200Q55,198,55,197Q50,192,57,186Q58,108,67,58Q62,64,57,71Q50,81,42,91Q37,99,27,104Q22,107,21,106
     Q20,106,24,102Q65,52,79,17Q78,13,81,16Z M206,42Q213,43,223,48Q225,50,224,51Q224,52,222,52Q197,51,170,59Q162,61,169,57Q173,56,168,55
     Q139,59,112,66Q94,72,81,65Q77,64,82,63Q95,64,119,59Q122,59,126,58Q159,53,182,50Q193,51,195,45Q197,40,206,42Z M158,122Q159,119,164,119
     Q172,118,178,119Q181,123,178,125Q159,128,139,148Q132,154,137,147Q141,141,145,134Q134,137,123,137Q120,137,120,135Q121,134,124,133Q144,132,158,122Z 
     M181,161Q185,166,190,168Q195,172,191,176Q184,183,179,190Q180,190,182,191T186,191Q190,195,188,199Q182,201,172,198Q167,198,158,197Q155,197,149,196Q152,200,155,201
     Q155,205,149,204Q140,199,133,196H132Q125,195,130,189Q133,186,129,180Q126,176,126,172Q126,171,127,171T129,172Q135,189,146,194Q155,195,161,192Q163,191,166,191Q178,178,178,170
     Q177,163,173,165Q166,167,161,168Q143,173,136,174Q134,174,133,173Q133,172,135,171Q147,165,155,165Q167,164,171,161Q177,158,181,161Z M154,90Q156,88,163,88Q173,89,177,90
     Q178,91,178,93Q178,94,177,94Q167,95,159,100Q150,109,141,114Q135,117,140,113Q142,109,146,105Q148,102,144,103Q136,105,122,103Q119,103,119,102T122,100Q141,99,154,90Z"
     id="path2"
     />
      </clippath>
    </svg>
    <svg id="third" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
      viewBox="0 0 258 258" width="256">
      <g id="zpath">
        <path
     d="m 26.923077,38.153846 18.461538,1.538462 30.153847,-8.615385 32.615388,-6.461538 -8.3077,-4.307693 -26.153842,19.384616"
     id="path1424" />
  <path
     d="M 65.692308,48.923077 79.538462,60 71.846154,58.461538 37.692308,107.38462 l -6.461539,4 2.153846,-4.61539 L 68.461538,96 c 0,0 25.846152,-10.769231 27.692312,-15.076923 C 98,76.615385 96.46154,77.846154 96.46154,77.846154"
     id="path1461" />
  <path
     d="M 88.769231,72.384615 122.23077,87 l 0.92308,0.538462"
     id="path1463" />
  <path
     d="m 30,151.38462 10.769231,1.84615 28.923077,-11.07692 31.692312,-17.84616"
     id="path1465" />
  <path
     d="M 58.615385,109.84615 74,118.46154 l -6.153846,2.46154 1.846154,28.61538 -3.076923,24.61539 2.76923,4"
     id="path1467" />
  <path
    d="M 29.076923,206.15385 44.769231,200 66.923077,182.46154 94.61538,153.84615 117.69231,128"
     id="path1469" />
  <path
     d="m 151.23077,12.307692 11.69231,10.769231 h -3.38462 L 149.07692,62.153846 133.69231,105.53846 126,115.07692 137.69231,103.69231 194.61538,76 213.69231,69.538462 h -13.23077 l -5.53846,-6.153847"
     id="path1471" />
  <path
     d="m 157.07692,108 8.3077,4.61538 h 5.53846 l -6.46154,4 -3.53846,12.3077 c 0,0 -9.46154,20 -10.84616,22.6923 C 148.69231,154.30769 143.15385,162 143.15385,162 l -12.92308,15.30769 -14.15385,13.76923 -14.23077,11.46154"
     id="path1473" />
  <path
     d="M 117.69231,139.07692 128,136.92308 l 3.38462,1.23077 v 3.23077 l 15.84615,20.15384 11.84615,15.38462 21.53846,20.61538 c 0,0 7.07693,6.92308 10.76924,7.53846 3.6923,0.61539 22.30769,0.15385 22.30769,0.15385 l 41.23077,3.84615"
     id="path1475" />
      </g>
      <clippath id="zclip">
        <path
     fill="currentColor"
     d="M156,16 Q168,22,164,26Q161,29,157,43Q152,61,138,98Q136,101,137,102L141,101L185,79Q190,78,196,67Q196,62,201,64Q206,68,214,67Q216,68,216,70
     T214,72Q194,77,144,103Q138,106,129,116Q126,119,124,119Q123,118,124,114Q125,105,130,103Q137,104,155,33Q158,23,155,17Q153,15,156,16 M103,18 Q107,21,111,23
     H114Q116,25,116,26T114,27Q95,28,80,37Q72,42,78,36Q80,34,79,34Q79,33,77,33L59,39Q48,44,32,40Q28,39,33,38Q45,39,57,34Q62,32,81,28Q84,27,88,26Q94,26,96,20
     Q97,16,103,18M72,51 Q74,54,80,56Q83,60,79,62Q74,61,67,70Q59,80,48,95Q45,99,44,101Q95,86,96,78Q93,77,92,75Q88,73,93,73Q113,75,121,83Q123,87,120,88Q113,90,109,86
     Q106,85,101,82L98,79Q98,83,93,86Q80,94,55,103Q36,108,33,114Q28,115,29,110Q30,107,31,103Q31,100,33,102Q34,104,39,102Q47,90,58,75Q61,70,65,65Q70,58,69,53Q68,52,69,51
     Q71,50,72,51 M65,111 Q67,113,71,115Q73,116,74,116Q77,118,77,119T75,122Q71,126,72,137Q93,124,99,125Q102,128,99,130Q78,141,72,145Q72,150,71,161T71,176Q91,156,112,133
     Q119,127,113,135Q66,193,37,207Q34,209,33,208Q32,208,33,206V204Q34,203,36,202Q50,196,66,180Q63,178,64,168Q64,165,65,159Q65,152,66,148Q39,160,36,154Q33,154,33,153T36,151
     Q51,148,62,143Q66,141,66,136Q66,116,63,113Q58,110,65,111 M162,109 Q164,111,170,110Q172,111,173,113Q173,114,171,115Q166,116,163,127Q159,138,147,159Q163,181,186,199Q190,204,205,203
     Q228,203,250,207Q253,208,253,209Q252,210,249,210Q231,207,204,208Q190,208,183,202Q157,179,146,162Q128,185,106,200Q101,204,105,199Q126,182,143,159Q133,145,130,143Q126,139,121,139
     Q118,139,121,137Q130,133,133,137Q137,146,145,156Q167,122,161,111Q158,107,162,109"
     id="path1231"/>
      </clippath>
    </svg>
  </div>

  <div>
    展示區 (姓名)
    <hr>
    <img id="Yang" width="256" src="./Yang.svg">
    <img id="Xin" width="256" src="./Xin.svg">
    <img id="Zhi" width="256" src="./Zhi.svg">
    <br/>
    <img id="Yang" width="256" src="./Yang_path.svg">
    <img id="Xin" width="256" src="./Xin_path.svg">
    <img id="Zhi" width="256" src="./Zhi_path.svg">
    <br/>
  </div>

  <div>
    Drag and Drop 展示區 (接收任何SVG)
  </div>

  <script type="text/javascript">
    // Your beautiful D3 code will go here
    for (let i = 1; i <= 10; i++) {
      $("#speed").append(new Option(i, i));
    }
    $("#speed").val(1);

    $("#speed").bind("change", changeVal);
    $("#color").bind("change", changeVal);
    changeVal();

    function changeVal() {
      var speed = $("#speed").val();
      var color = $("#color").val();
      setPathCss(speed, color, "#ypath", "#yclip");
      setPathCss(speed, color, "#xpath", "#xclip");
      setPathCss(speed, color, "#zpath", "#zclip");
    }

    function setPathCss(speed, color, id, cid) {
      var obj = $(id).find('path');
      var total = 0;
      $(id).css('fill', 'none');
      $(id).css('stroke-width', '20');
      $(id).css('stroke', color);
      $(id).css('clip-path', 'url(' + cid + ')');
      for (let i = 0; i < obj.length; i++) {
        $('#' + obj[i].id).css('animation', '');
      }
      for (let i = 0; i < obj.length; i++) {
        var length = obj[i].getTotalLength();
        $('#' + obj[i].id).css("opacity", 0);
        $('#' + obj[i].id).css("stroke-dasharray", length);
        $('#' + obj[i].id).css("stroke-dashoffset", length);
        $('#' + obj[i].id).css("animation", "letterDraw linear forwards " + length * speed / 1000 + 's ' + total * speed / 1000 + 's');
        total += length;
      }
    }
  </script>

</html>